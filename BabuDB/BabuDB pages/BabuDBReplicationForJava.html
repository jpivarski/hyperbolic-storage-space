<!DOCTYPE html>
<html style="cursor: auto ! important;"><head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
 
 <meta name="ROBOTS" content="NOARCHIVE">
 
 <link rel="icon" type="image/vnd.microsoft.icon" href="http://www.gstatic.com/codesite/ph/images/phosting.ico">
 
 
 <link rel="canonical" href="http://code.google.com/p/babudb/wiki/BabuDBReplicationForJava">
 
 <script async="" src="BabuDBReplicationForJava_files/cbgapi.js"></script><script gapi_processed="true" src="BabuDBReplicationForJava_files/plusone.js" async="" type="text/javascript"></script><script type="text/javascript">
 
 
 
 
 var codesite_token = "2HBLx9ts7-pTTrO0dZyVucFLDBs:1346573168834";
 
 
 var CS_env = {"profileUrl":["/u/115036434905974694138/"],"token":"2HBLx9ts7-pTTrO0dZyVucFLDBs:1346573168834","assetHostPath":"http://www.gstatic.com/codesite/ph","domainName":null,"assetVersionPath":"http://www.gstatic.com/codesite/ph/5121560014714628542","projectHomeUrl":"/p/babudb","relativeBaseUrl":"","projectName":"babudb","loggedInUserEmail":"jpivarski@gmail.com"};
 var _gaq = _gaq || [];
 _gaq.push(
 ['siteTracker._setAccount', 'UA-18071-1'],
 ['siteTracker._trackPageview']);
 
 _gaq.push(
 ['projectTracker._setAccount', 'UA-4530467-2'],
 ['projectTracker._trackPageview']);
 
 (function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
 
 </script><script src="BabuDBReplicationForJava_files/ga.js" async="" type="text/javascript"></script>
 
 
 <title>BabuDBReplicationForJava - 
 babudb -
 
 Description of BabuDB's replication for Java. - 
 An embedded non-relational database for Java and C++ - Google Project Hosting
 </title>
 <link type="text/css" rel="stylesheet" href="BabuDBReplicationForJava_files/core.css">
 
 <link type="text/css" rel="stylesheet" href="BabuDBReplicationForJava_files/ph_detail.css">
 
 
 
 <link type="application/atom+xml" rel="alternate" href="http://code.google.com/feeds/p/babudb/svnchanges/basic?path=/wiki/BabuDBReplicationForJava.wiki">
 
 
<!--[if IE]>
 <link type="text/css" rel="stylesheet" href="http://www.gstatic.com/codesite/ph/5121560014714628542/css/d_ie.css" >
<![endif]-->
 <style type="text/css">
 .menuIcon.off { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -42px }
 .menuIcon.on { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -28px }
 .menuIcon.down { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 0; }
 
 
 #maincol {
 padding-top: 0;
 padding-bottom: 0;
 }

 
 </style>
</head>
<body class="t6">
<script type="text/javascript">
 window.___gcfg = {lang: 'en'};
 (function() 
 {var po = document.createElement("script");
 po.type = "text/javascript"; po.async = true;po.src = "https://apis.google.com/js/plusone.js";
 var s = document.getElementsByTagName("script")[0];
 s.parentNode.insertBefore(po, s);
 })();
</script>
<div class="headbg">

 <div id="gaia">
 

 <span>
 
 
 
 <a href="#" id="multilogin-dropdown" onclick="return false;"><u><b>jpivarski@gmail.com</b></u> <small>▼</small></a>
 
 
 | <a href="http://code.google.com/u/115036434905974694138/" id="projects-dropdown" onclick="return false;"><u>My favorites</u> <small>▼</small></a>
 | <a href="http://code.google.com/u/115036434905974694138/" onclick="_CS_click('/gb/ph/profile');" title="Profile, Updates, and Settings"><u>Profile</u></a>
 | <a href="https://www.google.com/accounts/Logout?continue=http%3A%2F%2Fcode.google.com%2Fp%2Fbabudb%2Fwiki%2FBabuDBReplicationForJava" onclick="_CS_click('/gb/ph/signout');"><u>Sign out</u></a>
 
 </span>

 </div>

 <div class="gbh" style="left: 0pt;"></div>
 <div class="gbh" style="right: 0pt;"></div>
 
 
 <div style="height: 1px"></div>
<!--[if lte IE 7]>
<div style="text-align:center;">
Your version of Internet Explorer is not supported. Try a browser that
contributes to open source, such as <a href="http://www.firefox.com">Firefox</a>,
<a href="http://www.google.com/chrome">Google Chrome</a>, or
<a href="http://code.google.com/chrome/chromeframe/">Google Chrome Frame</a>.
</div>
<![endif]-->



 <table style="padding:0px; margin: 0px 0px 10px 0px; width:100%" itemscope="" itemtype="http://schema.org/CreativeWork" cellpadding="0" cellspacing="0">
 <tbody><tr style="height: 58px;">
 
 <td id="plogo">
 <link itemprop="url" href="http://code.google.com/p/babudb">
 <a href="http://code.google.com/p/babudb/">
 
 
 <img src="BabuDBReplicationForJava_files/logo.png" alt="Logo" itemprop="image">
 
 </a>
 </td>
 
 <td style="padding-left: 0.5em">
 
 <div id="pname">
 <a href="http://code.google.com/p/babudb/"><span itemprop="name">babudb</span></a>
 </div>
 
 <div id="psum">
 <a id="project_summary_link" href="http://code.google.com/p/babudb/"><span itemprop="description">An embedded non-relational database for Java and C++</span></a>
 
 </div>
 
 
 </td>
 <td style="white-space:nowrap;text-align:right; vertical-align:bottom;">
 
 <form action="/hosting/search">
 <input size="30" name="q" type="text">
 
 <input name="projectsearch" value="Search projects" type="submit">
 </form>
 
 </td></tr>
 </tbody></table>

</div>

 
<div id="mt" class="gtb"> 
 <a href="http://code.google.com/p/babudb/" class="tab ">Project&nbsp;Home</a>
 
 
 
 
 <a href="http://code.google.com/p/babudb/downloads/list" class="tab ">Downloads</a>
 
 
 
 
 
 <a href="http://code.google.com/p/babudb/w/list" class="tab active">Wiki</a>
 
 
 
 
 
 <a href="http://code.google.com/p/babudb/issues/list" class="tab ">Issues</a>
 
 
 
 
 
 <a href="http://code.google.com/p/babudb/source/checkout" class="tab ">Source</a>
 
 
 
 
 
 
 
 <div class="gtbc"></div>
</div>
<table class="st" align="center" border="0" cellpadding="0" cellspacing="0" width="100%">
 <tbody><tr>
 
 
 
 
 <td class="subt">
 <div class="issueDetail">
<div class="isf">
 
 <span class="inIssueList"> 
 <span>Search</span>
 <form action="/p/babudb/w/list" method="GET" style="display:inline">
 <select id="can" name="can">
 <option disabled="disabled">Search within:</option>
 
 <option value="1">&nbsp;All wiki pages</option>
 <option value="3">&nbsp;Featured pages</option>
 <option value="2" selected="selected">&nbsp;Current pages</option>
 
 
 <option value="5">&nbsp;My starred pages</option>
 
 <option value="4">&nbsp;Deprecated pages</option>
 
 </select>
 <span>for</span>
 <span id="qq"><input size="38" id="searchq" name="q" autocomplete="off" type="text"></span>
 
 
 
 <input value="Search" type="submit">
 </form>
 </span>

 
 
 
 
 
 
 

</div>
</div>

 </td>
 
 
 
 
 
 
 <td class="bevel-right" align="right" valign="top"></td>
 </tr>
</tbody></table>


<script type="text/javascript">
 var cancelBubble = false;
 function _go(url) { document.location = url; }
</script>
<div id="maincol">

 
<!-- IE -->







 <style type="text/css">
 .delcom { background: #e8e8e8 }
 .commentcontent {
 margin: 2em;
 padding: 0px 10px;
 width: 66em;
 }
 .artifactcomment {
 border-top: 3px solid #c3d9ff;
 }
 #commentform {
 border-top: 3px solid #c3d9ff;
 }
 </style>

<div id="wikipage">
<table>
 <tbody><tr>
 
 
 <td style="vertical-align:top; padding-left:5px">
 
 <div id="wikiheader">
 
 <img id="star_img" src="BabuDBReplicationForJava_files/star_off.gif" style="cursor:pointer" onclick="_CS_toggleStar(this,
 {'scope': 'wiki',
 'user': '_CURRENT_USER',
 'item': 'babudb:BabuDBReplicationForJava'
 });" height="15" width="15">
 
 <span style="font-size:120%;font-weight:bold">BabuDBReplicationForJava</span>
 &nbsp;
 <div> 
 
 <i>Description of BabuDB's replication for Java.</i>
 
 
 
 <div id="wikiauthor" style="float:right">
 Updated <span title="Thu Dec  3 07:05:55 2009">
 Dec 3, 2009</span>
 
 by 

 <a class="userlink" href="http://code.google.com/u/fx.langner@gmail.com/">fx.langner@gmail.com</a>
 
 </div>
 </div>
 </div>
 
 <div id="wikicontent">
 <div class="vt" id="wikimaincol">
 <h1><a name="BabuDB's_replication_for_Java"></a>BabuDB's replication for Java<a href="#BabuDB%27s_replication_for_Java" class="section_anchor"></a></h1><p>This
 page describes how the BabuDB replication for Java works. If you want 
to know how to setup the replication just have a look at the <a href="http://code.google.com/p/babudb/wiki/UsageReplicationForJava">UsageReplicationForJava</a> and if you are more interestered in the explanations of the configuration parameters you might read the <a href="http://code.google.com/p/babudb/wiki/OptionsForJava">OptionsForJava</a>. </p><h2><a name="Behavior"></a>Behavior<a href="#Behavior" class="section_anchor"></a></h2><p>The
 following chapters will explain some sequence diagrams, which 
illustrate the behavior of the replication on different scenarios. 
Because of the master-slave architecture, slaves are passive 
participants, which have to be triggered by a master's request. 
Therefore all scenarios are beginning with a master's operation 
replicate request. Exceptional the heartbeat thread, which is a 
component of the slave's implementation, sends messages in periodic 
intervals to the master. This is necessary to support the accounting for
 the master, which will be explained in the chapter "Architecture". 
That's why slaves are represented by two instances named <tt>BabuDB(Slave)</tt> and <tt>HeartbeatThread</tt>. Normally a master serves more than one slave, but for simplification there will be only one slave diagrammed. </p><h3><a name="Basic_replication"></a>Basic replication<a href="#Basic_replication" class="section_anchor"></a></h3><p>Here the default scenario is shown, without any failure on the slave(s). </p><p><img src="BabuDBReplicationForJava_files/1PlainReplication.jpg"> </p><p>After a user's application represented by the <tt>user</tt> instance has executed an operation on the master <tt>[1]</tt>, it saves a binary representation of the operation <tt>LogEntry</tt> to it's local disk-log-file to make it locally persistent <tt>[2]</tt>. Subsequently this <tt>LogEntry</tt> is send out to the slave(s) <tt>[3]</tt>. There it is executed as well <tt>[4]</tt> and after successfully finishing that the latest sequence number <tt>LSN</tt>, which is an indicator for progress on the slave, is updated on the <tt>HeartbeatThread</tt> <tt>[5]</tt>. This update causes an additional heartbeat, which is now send to the master to confirm the request to be replicated <tt>[6]</tt>. Depending on the replication mode, configured through the <tt>sync-N</tt> parameter, the master stalls the acknowledgement for the operation until at least <tt>N</tt> slaves have confirmed the replication request <tt>[7]</tt>. </p><h3><a name="Request_missing_log_entries"></a>Request missing log entries<a href="#Request_missing_log_entries" class="section_anchor"></a></h3><p>The previously mentioned <tt>LSN</tt>s
 are also used to notice consistency violations with the master due 
their total ordering relation property. Therefore replication requests 
from the master are equipped with a <tt>LSN</tt>. The following diagram shows how a slave requests missing log entries at the master.  </p><p><img src="BabuDBReplicationForJava_files/2LogEntryRequest.jpg">  </p><p>After the first steps <tt>[1,2,3]</tt>,
 which are already explained in the "Basic replication" section, the 
slave recognizes some missing replication operations and builds a range 
from the last inserted operation to the actual requested one <tt>[4]</tt>. The inner state of this slave changes to <tt>REQUEST</tt> and it requests the missing log entries at the master b<tt>[5]</tt>.
 A list of log entries were received as response to that request and the
 slave executes them according to their natural ordering given by the <tt>LSN</tt> of each log entry <tt>[6]</tt>. Now the log entry which was triggering this scenario is executed and the <tt>LSN</tt> for the heartbeat thread is updated too <tt>[7]</tt>. Finally the master gets the heartbeat message from the slave <tt>[8]</tt> and acts analogical to the description of the first scenario in this chapter. </p><h3><a name="Initial_load_on_request_failure"></a>Initial load on request failure<a href="#Initial_load_on_request_failure" class="section_anchor"></a></h3><p>If
 a slave cannot synchronize with the master by requesting missing log 
entries at the master, it has to load the complete database from the 
master. This scenario is described here and should be the most 
infrequently occurring scenario as well, because of its high cost. 
Mostly this occurs if a slave joins a replication group that was in 
action before. </p><p><img src="BabuDBReplicationForJava_files/3Load.jpg"> </p><p>Until
 the slave requests the range from the master this scenario begins 
exactly the same way as described in section "Request missing log 
entries" <tt>[1,2,3,4,5]</tt>. The difference is that in this case the range request fails and so the slave has to send a load request to the master <tt>[6]</tt>
 to get synchronized with it. As result of that request the slave gets a
 set of file metadata which are the latest persistent database files of 
the master. These files are broken into smaller pieces called <tt>chunk</tt>s to save bandwith. After saving all of these chunks to the local disk <tt>[8]</tt> the slave has to be restarted to load the new data from disk <tt>[9]</tt>. In the end the heartbeat <tt>LSN</tt> is updated to the latest <tt>LSN</tt> retrieved from the files on disk <tt>[10]</tt>. The step hereafter is again the same as described in section "Basic replication" of this chapter. </p><h2><a name="Architecture"></a>Architecture<a href="#Architecture" class="section_anchor"></a></h2><p>BabuDB
 uses a master-slave related replication model. Databases are replicated
 by the granularity of single operations. Any operation performed by the
 user will cause a logentry to be written to the pending disk-log-file. 
These log entries are serialized and spread by the master via an ONCRPC 
architecture adapted from the <a href="http://www.xtreemfs.org/" rel="nofollow">XtreemFS project</a>
 to the slaves. Master and slave have most components but their request 
dispatchers in common. These request dispatchers define the behavior of 
the master- and slave-role in this replication implementation. They have
 some state operations in common that can be accessed by any replication
 participant. There is an operation to stop the BabuDB (idle-mode) and 
put it into slave or master mode. Also a operation to get the latest 
progress-state defined through a <tt>LSN</tt> is available. This <tt>LSN</tt> identifies the latest log entry that is written to the disc log and is retrieved from the <tt>diskLogger</tt>.
 On startup a BabuDB replication participant remains in an idle-mode and
 is coined on the declaration of a master. The following state machines 
will describe how master and slave request dispatchers are working. </p><h3><a name="Master"></a>Master<a href="#Master" class="section_anchor"></a></h3><p>The
 master was designed to produce a minimum overhead to save BabuDB's 
performance on insert and lookup operations. It simply has to spread 
operations performed by the users application to the slaves after 
checking if enough slaves are available to satisfy the sync-N criterion.
 Therefore any heartbeat messages are evaluated by the accountancy 
instance <tt>slavesState</tt>. To give the slaves the opportunity to 
synchronize with the master there are additional operations which now 
will be described from top to bottom. </p><p><img src="BabuDBReplicationForJava_files/MasterRequestDispatcherLogic.jpg">  </p><p>Any
 activity is triggered by an incoming operation. Therefore the request 
dispatcher remains in its initial state until such a request is 
received. After finishing an operation the request dispatcher will 
return to its initial state and wait for further requests. The first of 
these operations is named <tt>state</tt> and can be triggered by a 
replication participant, or the users local application. It will cause 
the request dispatcher to get the identifier of the latest written log 
entry defined through a <tt>LSN</tt> from the <tt>diskLogger</tt>. The second operation is a pure remote operation called <tt>heartbeat</tt>. It is used by the slaves to send their progress informations to the master, that it can account these informations at the <tt>slavesState</tt>. The next operation can only be implicit executed by the users local application and is here denoted as <tt>replicate</tt>. Any database modifying user operation will execute a request dispatcher method called <tt>replicate()</tt> which hides behind the replication manager interface. This method will get all slaves available from the <tt>slavesState</tt> instance and check their quantity against the <tt>sync-N</tt>.
 If that check failes the request will be marked as failed and the 
replication switchs to the idle-mode, otherwise the serialized operation
 is send out to the slaves as described in chapter "Behavior". <tt>request</tt>
 is the next operation mentioned in here. It correlates with the missing
 log entries request also described in the "Behavior"-chapter. If the 
missing log entries defined by a <tt>LSNRange</tt> can be retrieved 
successfully, they are send back to the requesting slave, otherwise it 
will be informed about the failure. The last two operations are 
corresponding to the initial load section of the "Behavior"-chapter. The
 request dispatcher responds to a <tt>load</tt> a complete set of 
database files metadata to the requesting slave including the maximal 
chunk-size from the configuration. Even this operation can fail and send
 a failure message back to the slave. A request named <tt>chunk</tt> 
will be answered with a serialized byte-range according to the request's
 details. If the files on disk has been changed meanwhile, a 
failure-message is send back to the slave. To provide a minimal security
 even without using SSL authentication the master only allows requests 
from pre-configured participants or the local user application. </p><h3><a name="Slave"></a>Slave<a href="#Slave" class="section_anchor"></a></h3><p>The
 slaves implementation works a way more autonomic.Beyond a request 
dispatcher, which only accepts state and replicate requests, are a <tt>replicationStage</tt> and the <tt>heartbeatThread</tt>. The <tt>heartbeatThread</tt> sends periodically messages to the master containing its progress in form of a <tt>LSN</tt>. The <tt>replicationStage</tt>
 encloses the logic to process replicate requests and keep the slave in a
 synchronous state with the master. Incoming replicate requests are 
previously buffered in a <tt>requestQueue</tt> ascending ordered by their <tt>LSN</tt>s. The logic is encapsulated in three different instances according to the three states the <tt>replicationStage</tt> can assume (<tt>BASIC</tt>,<tt>REQUEST</tt> and <tt>LOAD</tt>).
 These states correlate with the three scenarios introduced in the 
chapter "Behavior" and will be explained though state-machines in the 
following sections. To provide a minimal security even without using SSL
 authentication the slaves only allow requests from pre-configured 
participants or lookup operations by the local user application.  </p><h4><a name="Basic_logic"></a>Basic logic<a href="#Basic_logic" class="section_anchor"></a></h4><p>
  This logic is used if the slave is in a synchronous state with the 
master and for this reason able to process requests normally. <tt>BASIC</tt> is the initial state for a newly instanciated slave. </p><p><img src="BabuDBReplicationForJava_files/3BasicReplicationLogic.jpg"> </p><p>In the logic's initial state the slave waits for new replicate request on the <tt>requestQueue</tt>.
 A new request is taken from the head of the queue if it becomes 
available. Now the logic tries to perform the operation retrieved from 
the request. If that <tt>succeeded</tt> the <tt>LSN</tt> of the 
heartbeatThread is updated with the one from the request and the logic 
returns to its initial state. Otherwise if the request <tt>failed</tt> it is queued up the <tt>requestQueue</tt> again. From the <tt>LSN</tt> of the request and the <tt>heartbeatThread</tt> a range of missing replicate requests is reconstructed and saved to a designated field named <tt>missingRange</tt>. After that the state of the <tt>replicationStage</tt> is changed to <tt>REQUEST</tt> and on returning to the initial state of this logic the <tt>replicationStage</tt> switches over to the request logic instance described next. </p><h4><a name="Request_logic"></a>Request logic<a href="#Request_logic" class="section_anchor"></a></h4><p>The request logic is used if the slave has recognized some missing replicate requests and recovers them from the master. </p><p><img src="BabuDBReplicationForJava_files/4LogEntryRequestLogic.jpg">  </p><p>After it has been initialized the request logic builds a request from the <tt>missingRange</tt>
 and sends it to the master to get the missing requests. If that request
 was responded successfully by the master the operations are executed 
and their log entries are written to the disc.If even this <tt>succeeded</tt> the <tt>heartbeatThread</tt> is updated with the last <tt>LSN</tt> of the requested replicate requests. The <tt>replicationStage</tt>'s state is switched back to <tt>BASIC</tt>
 and the logic returns to its initial state, where it can be replaced by
 another logic. If the requesting or the execution of the replicate 
request fails the <tt>replicationStage</tt>'s state is immediately changed to <tt>LOAD</tt> and the logic returns to its initial state. The logic for the <tt>LOAD</tt> state is explained ahead. </p><h4><a name="Load_logic"></a>Load logic<a href="#Load_logic" class="section_anchor"></a></h4><p><tt>LOAD</tt>
 as expected loads a complete copy of the on disc database files from 
the master. This is necessary if a synchronous state can not be 
established by simply requesting missing log entries from the master. </p><p><img src="BabuDBReplicationForJava_files/5InitialLoadLogic.jpg">  </p><p>At
 the beginning the old database files of the slaves on disc state are 
copied into a pre-configured backup directory. Then the a load request 
is send to the master asking for a set of database files metadata and a 
limit for the chunk-size. If that request failes the slave has to give 
up, switch over into the idle-mode and wait for a new master to be 
declared. Otherwise it builds a set of chunk-requests out of the 
informations to load the database from the master chunk by chunk. Every 
chunk will be processed in the same way, it will be requested and the 
binary answer will be written to the local disc until no chunks are 
left. If only one chunk-request fails the complete progress from the 
load request on has to be repeated. After all chunks are successfully 
written the BabuDB itself has to be restarted to load the new on-disc 
state. The <tt>LSN</tt> of this state is used to update the <tt>heartbeatThread</tt> and finally the state of the <tt>replicationStage</tt> is also changed back to <tt>BASIC</tt>. The logic returns to its initial state and the loading process is finished. </p><h2><a name="How_the_invariants_are_assured"></a>How the invariants are assured<a href="#How_the_invariants_are_assured" class="section_anchor"></a></h2><p>This chapter explains, how the architecture assures that the invariants needed for a consistent replication of BabuDB are held. </p><h3><a name="Invariants"></a>Invariants<a href="#Invariants" class="section_anchor"></a></h3><ol><li>All
 BabuDB instances participating in a replication-setup can be declared 
to master, slave or remain in a well defined idle-mode.  </li><li>A slave does obey only one master at a time. </li><li>Slaves are read-only.  </li><li>If a master cannot spread an operation to at least <i>N</i> required slaves, in the <i>N-synchronous</i>
 replication context, it immediately changes to the idle-mode and 
rejects any further operations until a new master is declared. 
Successful spreading does not imply a successful replication but it is 
essential. </li><li>If a slave cannot synchronize with the master for any reason it will immediately change to the idle-mode. </li><li>At any time every participant can state a distinct LSN (Logentry Sequence Number) representing its progress. </li></ol><h3><a name="Explanations"></a>Explanations<a href="#Explanations" class="section_anchor"></a></h3><ol><li>With the <tt>pauses()</tt>
 method of the request dispatcher the replication can be suspended. The 
BabuDB is now in the above mentioned well defined idle-mode, where it 
rejects any operation except those which can change its state to master,
 slave, or get its on disk <tt>LSN</tt>. The corresponding <tt>continues()</tt> method must be parameterized with <tt>SLAVE</tt> or <tt>MASTER</tt> to continue the replication. </li><li>Slaves have to be coined explicitly on a master using the <tt>coin()</tt>
 method. It is parameterized with the i-net-address of the new master 
and has necessarily to be executed, before the slave is continued. 
Otherwise the continuation will fail.   </li><li>There is a method called <tt>slaveCheck()</tt> which is executed before any user-application-triggered, protected operation to prevent write-operations on slaves. </li><li>How
 that works is explained in detail with the implementation of the master
 in the "Architecture"-chapter. There is a accouting instance as part of
 the master called <tt>slavesState</tt> that enables the master to satisfy that invariant. </li><li>The
 slaves has two mechanisms to restore a synchronized state with the 
master. If both of them fail it will change to the idl-mode as described
 in section "Load logic" of the slaves architecture. </li><li>Master and
 slaves have an operation in common that allows other replication 
participants to request the identifier of their latest written log entry
 defined by a <tt>LSN</tt> as described in the chapter "Architecture". </li></ol>
 </div>
 </div>
 </td></tr><tr>
</tr></tbody></table>
 </div>


 
 
 
 
 
 <div id="commentform">
 <form action="../w/detail.do" method="post">
 <table>
 <tbody><tr><td class="vt">
 <input name="pagename" value="BabuDBReplicationForJava" type="hidden">
 <input name="token" value="2HBLx9ts7-pTTrO0dZyVucFLDBs:1346573168834" type="hidden">
 <div class="graytext" style="float: right;">
 Hint: You can use <a href="http://code.google.com/p/support/wiki/WikiSyntax">Wiki Syntax.</a>
 </div>
 <div>Enter a comment:</div>
 <textarea name="content" rows="6" cols="100"></textarea><br><br>
 <input name="submit" value="Submit" type="submit">
 </td>
 </tr></tbody></table>
 </form>
 </div>
 
 
 
 
 
 <form name="delcom" action="../w/delComment.do" method="POST">
 <input name="sequence_num" value="" type="hidden">
 <input name="create_time" value="" type="hidden">
 <input name="mode" value="" type="hidden">
 <input name="pagename" value="BabuDBReplicationForJava" type="hidden">
 <input name="token" value="2HBLx9ts7-pTTrO0dZyVucFLDBs:1346573168834" type="hidden">
 </form>


 <script src="BabuDBReplicationForJava_files/prettify.js"></script>
 <script type="text/javascript">
 prettyPrint();
 </script>

<script type="text/javascript" src="BabuDBReplicationForJava_files/dit_scripts.js"></script>



  
 
 
 <script type="text/javascript" src="BabuDBReplicationForJava_files/ph_core.js"></script>
 
 <script type="text/javascript" src="BabuDBReplicationForJava_files/ph_dwiki.js"></script>
 
 
 
 
</div> 

<div id="footer" dir="ltr">
 <div class="text">
 <a href="http://code.google.com/projecthosting/terms.html">Terms</a> -
 <a href="http://www.google.com/privacy.html">Privacy</a> -
 <a href="http://code.google.com/p/support/">Project Hosting Help</a>
 </div>
</div>
 <div class="hostedBy" style="margin-top: -20px;">
 <span style="vertical-align: top;">Powered by <a href="http://code.google.com/projecthosting/">Google Project Hosting</a></span>
 </div>

 
 


 
 



<div style="position: absolute; top: 18px; left: 908px; display: none;" id="menuDiv-projects-dropdown" class="menuDiv instance0"><div style="display: none;" class="menuCategory default"></div><b style="display: block;" class="categoryTitle projects">Projects</b><div class="menuCategory projects first"><a href="http://code.google.com/p/cassius/" style="display: block;" class="menuItem">cassius</a><a href="http://code.google.com/p/plothon/" style="display: block;" class="menuItem">plothon</a><a href="http://code.google.com/p/pyminuit/" style="display: block;" class="menuItem">pyminuit</a><a href="http://code.google.com/p/pyminuit2/" style="display: block;" class="menuItem">pyminuit2</a><a href="http://code.google.com/p/svgfig/" style="display: block;" class="menuItem">svgfig</a></div><div class="menuCategory controls"><hr class="menuSeparator"><a href="http://code.google.com/hosting/" style="display: block;" class="menuItem">Find open source projects...</a><a href="http://code.google.com/hosting/createProject" style="display: block;" class="menuItem">Create a project...</a></div></div><div style="position: absolute; top: 18px; left: 753px; display: none;" id="menuDiv-multilogin-dropdown" class="menuDiv instance1"><div class="menuCategory default first"><span style="display: block;" class="menuText"><b>jpivarski@gmail.com</b></span><a href="http://code.google.com/p/babudb/wiki/BabuDBReplicationForJava?authuser=1" style="display: block;" class="menuItem">jim.pivarski@opendatagroup.com</a></div><div class="menuCategory controls"><hr class="menuSeparator"><a href="http://www.google.com/accounts/AddSession?service=code&amp;continue=http%3A%2F%2Fcode.google.com%2Fp%2Fbabudb%2Fwiki%2FBabuDBReplicationForJava" style="display: block;" class="menuItem"><nobr>Sign in with another account...</nobr></a></div></div></body></html>